<!DOCTYPE html>
<html lang="tr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WEIAP - Rüzgar Enerjisi Altyapı Değerlendirme Platformu</title>
  <meta name="description" content="Türkiye rüzgar enerjisi fizibilite analizi">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <script type="module" src="https://unpkg.com/@splinetool/viewer@1.12.28/build/spline-viewer.js"></script>
</head>

<body>
  <section class="hero">
    <spline-viewer class="hero-bg" url="https://prod.spline.design/uXcqSG2Tt37Tl7X0/scene.splinecode"></spline-viewer>
    <div class="hero-overlay">
      <div class="hero-top">
        <div class="welcome-pill">WEIAP v1.1</div>
      </div>
      <div class="hero-bottom">
        <div class="info-card">
          <p class="eyebrow">Platform</p>
          <h3>Tekno-Ekonomik Fizibilite</h3>
          <p class="muted">3 yıllık arşiv verisi ile gerçekçi analiz</p>
        </div>
        <div class="info-card">
          <p class="eyebrow">Motor</p>
          <h3>Wind Shear & Yoğunluk</h3>
          <p class="muted">Hellmann yasası ile doğru güç tahmini</p>
        </div>
        <div class="info-card">
          <p class="eyebrow">Ekonomi</p>
          <h3>LCOE & ROI</h3>
          <p class="muted">Elektrik maliyeti ve geri ödeme</p>
        </div>
        <a class="start-btn" href="#app">Analize Başla</a>
      </div>
    </div>
  </section>

  <header class="topbar">
    <div class="branding">
      <span class="logo-dot"></span>
      <div>
        <p class="eyebrow">Wind Energy Infrastructure Assessment Platform</p>
        <h1>WEIAP - Türkiye Rüzgar Enerjisi Fizibilite Analizi</h1>
      </div>
    </div>
    <p class="lede">Haritadan konum seçin, profesyonel fizibilite raporu alın.</p>
  </header>

  <main id="app" class="layout">
    <section class="map-card">
      <div class="map-shell">
        <div id="map"></div>
        <div class="map-overlay">
          <div class="overlay-header">
            <div>
              <p class="eyebrow">Arşiv Verisi</p>
              <h3>Open-Meteo</h3>
            </div>
            <span class="overlay-pill" id="overlayStatus">Bekleniyor</span>
          </div>
          <div class="overlay-grid">
            <div>
              <p class="eyebrow">Ort. Hız (Hub)</p>
              <p class="overlay-value" id="overlayAvg">—</p>
            </div>
            <div>
              <p class="eyebrow">En Yüksek</p>
              <p class="overlay-value" id="overlayMax">—</p>
            </div>
            <div>
              <p class="eyebrow">Veri Sayısı</p>
              <p class="overlay-value" id="overlayCount">—</p>
            </div>
          </div>
          <p class="overlay-note" id="overlayRange">—</p>
        </div>
      </div>
      <div class="map-footer">
        <div>
          <p class="eyebrow">Seçili konum</p>
          <p class="location-label" id="locationLabel">Henüz seçilmedi</p>
          <p class="coords" id="coordsLabel">—</p>
        </div>
        <div class="footer-controls">
          <select id="dataYears" class="data-years-select">
            <option value="1">1 Yıl (Hızlı)</option>
            <option value="2">2 Yıl</option>
            <option value="3">3 Yıl (Detaylı)</option>
          </select>
          <div class="status-badge" id="statusBadge">Hazır</div>
        </div>
      </div>
    </section>

    <section class="side-panel">
      <div class="panel turbine-panel">
        <div class="panel-header">
          <div>
            <p class="eyebrow">Türbin Konfigürasyonu</p>
            <h2>Model Seçimi</h2>
          </div>
        </div>
        <select id="turbineSelect" class="turbine-select">
          <option value="generic_2mw">Genel 2 MW (Hub: 80m)</option>
          <option value="vestas_v110">Vestas V110-2.0 (Hub: 95m)</option>
          <option value="vestas_v150">Vestas V150-4.2 (Hub: 105m)</option>
        </select>
        <div class="turbine-specs">
          <div class="spec-item">
            <span class="spec-label">Nominal Güç</span>
            <span class="spec-value" id="turbineRatedPower">2,000 kW</span>
          </div>
          <div class="spec-item">
            <span class="spec-label">Göbek Yüksekliği</span>
            <span class="spec-value" id="turbineHubHeight">80 m</span>
          </div>
          <div class="spec-item">
            <span class="spec-label">Cut-in / Rated / Cut-out</span>
            <span class="spec-value" id="turbineSpeeds">3.5 / 12 / 25 m/s</span>
          </div>
        </div>
      </div>

      <div class="panel">
        <div class="panel-header">
          <div>
            <p class="eyebrow">Teknik Analiz</p>
            <h2>Yıllık Enerji Üretimi</h2>
          </div>
          <span class="badge">AEP</span>
        </div>
        <div class="aep-grid">
          <div class="aep-card gross">
            <p class="eyebrow">Brüt AEP</p>
            <h3 id="grossAEP">—</h3>
            <small>MWh/yıl</small>
          </div>
          <div class="aep-card net">
            <p class="eyebrow">Net AEP</p>
            <h3 id="netAEP">—</h3>
            <small>MWh/yıl</small>
          </div>
        </div>
        <div class="metrics-grid">
          <div class="metric">
            <p>Kapasite Faktörü</p>
            <h3 id="capacityFactor">—</h3>
          </div>
          <div class="metric">
            <p>Ort. Rüzgar</p>
            <h3 id="avgWindSpeed">—</h3>
          </div>
          <div class="metric">
            <p>α (Shear)</p>
            <h3 id="windShearAlpha">—</h3>
          </div>
          <div class="metric">
            <p>ρ (kg/m³)</p>
            <h3 id="avgDensity">—</h3>
          </div>
        </div>
      </div>

      <div class="panel">
        <div class="panel-header">
          <div>
            <p class="eyebrow">Ekonomik Fizibilite</p>
            <h2>Yatırım Analizi</h2>
          </div>
          <span class="hint">USD</span>
        </div>
        <form class="form-grid">
          <label><span>CAPEX ($/kW)</span><input type="number" id="capexPerKw" value="1100" min="500"></label>
          <label><span>OPEX ($/MW/yıl)</span><input type="number" id="opexPerMw" value="30000" min="5000"></label>
          <label><span>Fiyat ($/kWh)</span><input type="number" id="electricityPrice" value="0.055"
              step="0.005"></label>
          <label><span>Ömür (Yıl)</span><input type="number" id="projectLifetime" value="20" min="10" max="30"></label>
        </form>
        <div class="economic-results">
          <div class="econ-card lcoe">
            <p class="eyebrow">LCOE</p>
            <h3 id="lcoeValue">—</h3>
            <small>$/MWh</small>
          </div>
          <div class="econ-card">
            <p class="eyebrow">CAPEX</p>
            <h3 id="totalCapex">—</h3>
          </div>
          <div class="econ-card">
            <p class="eyebrow">Gelir/Yıl</p>
            <h3 id="annualRevenue">—</h3>
          </div>
          <div class="econ-card payback">
            <p class="eyebrow">Geri Ödeme</p>
            <h3 id="paybackPeriod">—</h3>
            <small>yıl</small>
          </div>
        </div>
      </div>

      <div class="panel">
        <div class="panel-header">
          <div>
            <p class="eyebrow">Rüzgar Karakteristiği</p>
            <h2>Yön Dağılımı</h2>
          </div>
        </div>
        <div class="wind-rose-container">
          <canvas id="windRoseCanvas" width="260" height="260"></canvas>
        </div>
        <div class="dominant-direction">
          <span class="eyebrow">Hakim Yön</span>
          <span id="dominantDirection">—</span>
        </div>
      </div>
    </section>
  </main>

  <div class="loading-overlay" id="loadingOverlay">
    <div class="loading-content">
      <div class="spinner"></div>
      <p class="loading-text">Veri alınıyor...</p>
      <p class="loading-subtext" id="loadingProgress">Lütfen bekleyin</p>
    </div>
  </div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script type="module" src="/src/main.js"></script>
</body>

</html>